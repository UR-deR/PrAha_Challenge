# ビジュアルリグレッションテストを書こう

## 課題 1

## 課題 2

### ビジュアルリグレッションテスト

**メリット**

- スタイルのリグレッションを検知できる。人間が目視でやると時間的なコストかかる
- 特定の style 属性の値や class 属性の値を持っているのかのアサーションを書かなくても良くなるので、テストコードの量が減る
- スタイルシートのリファクタリングがしやすくなる。

**デメリット**

- 単体テストなどと比べて、どこが原因でテストが失敗したのかがわかりにくい。
- 開発者間で OS や設定が異なることが原因で、ベースとなる image_snapshots が異なってしまいテストが難しくなることも

### スナップショットテスト

**メリット**

- DOM ツリーのリグレッションを検出しやすい
- testing library の matcher で`expect(hoge).toBeInTheDocument()`を至る所に書かなくても良くなる。snapshot 一発で element が存在するかを一括で検証できる

**デメリット**

- css in js のライブラリなどで動的に html の class 属性を生成していたりすると、snapshot が安定しなくなるかもしれない。また、開発者にとって css in js ライブラリが生成する className には関心がなく、適切にスタイルができていれば良いと思うので、それがテストコード保守のネックになるのは辛そう

- 保守が大変そう。develop ブランチ（Main ブランチ）のスナップショットは絶対的に正しいものになっていないとスナップショットテストとして意味をなさないので、絶対的に正しい状態を維持するのにはコードレビューなどの負担に影響がありそう。

## 課題 3

絶対的な正解は無いクイズです

Q1. どのようなプロジェクトでビジュアルリグレッションテストを採用したいか、採用したくないでしょうか？

Q2. atomic デザインを採用している場合、どの層のコンポーネントに VRT を取り入れたいですか？
（例：全てのコンポーネントで取り入れるべき。organisms 以上のコンポーネントだけ。molecules 以上のコンポーネントなど）

Q3. どのような性質を持ったコンポーネントだと、VRT を取り入れるのが難しいでしょうか？
