generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model teams {
  id    Int     @id @default(autoincrement())
  name  String
  pairs pairs[]
}

model pairs {
  id        Int         @id @default(autoincrement())
  name      String
  team_id   Int
  team      teams       @relation(fields: [team_id], references: [id])
  attendees attendees[]
}

model attendees {
  id                           Int                            @id @default(autoincrement())
  name                         String
  email                        String
  pair_id                      Int
  status_id                    Int
  pair                         pairs                          @relation(fields: [pair_id], references: [id])
  status                       attendee_statuses              @relation(fields: [status_id], references: [id])
  attendee_assignment_statuses attendee_assignment_statuses[]
}

model assignments {
  id                           Int                            @id @default(autoincrement())
  title                        String
  description                  String?
  attendee_assignment_statuses attendee_assignment_statuses[]
}

model attendee_statuses {
  id        Int         @id @default(autoincrement())
  name      String
  attendees attendees[]
}

model assignment_statuses {
  id                           Int                            @id @default(autoincrement())
  name                         String
  attendee_assignment_statuses attendee_assignment_statuses[]
}

model attendee_assignment_statuses {
  attendee_id   Int
  assignment_id Int
  status_id     Int
  attendee      attendees           @relation(fields: [attendee_id], references: [id])
  assignment    assignments         @relation(fields: [assignment_id], references: [id])
  status        assignment_statuses @relation(fields: [status_id], references: [id])

  @@id([attendee_id, assignment_id])
}
